!function(e,t,o,s){"use strict";var i=t.csk=t.csk||{};i.i18n=i.i18n||{},"undefined"!=typeof bootbox&&bootbox.setDefaults({backdrop:!1,closeButton:!1,locale:i.config.lang.code,size:"small"}),i.ui={toggleSidebar:function(t){t.preventDefault(),t.stopPropagation();var o=e("#csk-sidebar");o.length&&o.toggleClass("open")},confirm:function(e,t,o){"undefined"!=typeof bootbox?bootbox.confirm({message:e,callback:function(e){bootbox.hideAll(),!0===e&&"function"==typeof t?t(!0):"function"==typeof o&&o(!0)}}):confirm(e)&&"function"==typeof t?t(!0):"function"==typeof o&&o(!0)},alert:function(e,t){if("undefined"!=typeof toastr)switch(t){case"success":toastr.success(e);break;case"error":toastr.error(e);break;case"warning":toastr.warning(e);break;case"info":default:toastr.info(e)}else alert(e)}},i.ajax={requests:[],requesting:!1,context:void 0,request:function(t,o){(o=o||{}).context;var s=o.type||"GET";o=e.extend({url:t,method:s,type:s,async:!0,cache:!1,dataType:"json",success:function(e,t,o){i.ajax._response(e)}},o),this.requests.push(o),this._execute()},stop:function(){this.requests=[]},_execute:function(){if(0!=this.requests.length&&1!=this.requesting){var t=this.requests.splice(0,1)[0],o=t.complete,s=this;t._execute&&t._execute(t),t.complete=function(){o&&o.apply(this,arguments),s.requesting=!1,s._execute()},this.requesting=!0,e.ajax(t)}},_response:function(e){e=e||{};if(i.ajax.context=this,void 0!==e.message&&e.message.length&&i.ui.alert(e.message,"success"),void 0!==e.scripts)for(var t=e.scripts.length,o=0;o<t;o++)try{new Function(e.scripts[o]).call(this)}catch(e){console.log(e)}}},e(o).ready(function(){if("undefined"!=typeof toastr&&(toastr.options={closeButton:!0,positionClass:"toast-top-center",hideDuration:"300",timeOut:"3500",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},"rtl"===i.config.lang.direction&&(toastr.options.rtl=!0)),e(o).on("click",".sidebar-toggle",function(e){return i.ui.toggleSidebar(e)}),void 0!==e.fn.tooltip&&e("[data-toggle=tooltip], [rel=tooltip]").tooltip(),void 0!==e.fn.popover&&e("[data-toggle=popover], [rel=popover]").popover(),e(o).on("submit","form",function(t){var o=e(this);return o.find("[type=submit]").prop("disabled",!0).addClass("disabled"),o.submit(function(){return!1}),!0}),void 0!==e.fn.garlic&&e("[rel=persist]").garlic(),e(o).on("click","a[rel]",function(t){var o=e(this),s=o.attr("rel"),n=o.attr("href");if(void 0!==n)switch(s){case"async":case"async-post":t.preventDefault();var a="async"===s?"GET":"POST";return i.ajax.request(n,{el:this,type:a,beforeSend:function(){o.prop("disabled")||o.prop("disabled",!0).addClass("disabled")},complete:function(){o.prop("disabled",!1).removeClass("disabled")}}),!1}else t.preventDefault()}),e(o).on("submit","form[rel]",function(t){var o=e(this),s=o.attr("rel"),n=o.attr("action");if(void 0!==n)switch(s){case"async":return t.preventDefault(),i.ajax.request(n,{el:this,type:"POST",data:o.serializeArray(),beforeSend:function(){o.prop("disabled")||o.find("[type=submit]").prop("disabled",!0).addClass("disabled")},complete:function(){o.find("[type=submit]").prop("disabled",!1).removeClass("disabled")}}),!1}else t.preventDefault()}),void 0!==e.fn.modal){var s=e(".modal");s.length&&s.modal("show"),e(o).on("hidden.bs.modal",".modal",function(t){e(this).remove()})}e(o).on("click","[data-confirm]",function(o){o.preventDefault();var s=e(this),n=s.attr("href"),a=s.attr("data-confirm");return i.ui.confirm(a)&&(t.location.href=n),!1}),e(".alert-dismissable").length&&e(".alert-dismissable").fadeTo(3e3,500).slideUp(500,function(){e(this).alert("close")}),e(o).on("show.bs.dropdown",".table-responsive",function(){e(this).css("overflow","inherit")}).on("hide.bs.dropdown",".table-responsive",function(){e(this).css("overflow","auto")})})}(window.jQuery||window.Zepto,window,document);
