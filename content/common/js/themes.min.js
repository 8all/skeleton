!function(e,t,n,i){"use strict";var a=t.csk=t.csk||{},r=a.config.currentURL;a.i18n=a.i18n||{},a.i18n.themes=a.i18n.themes||{},a.themes={details:function(i){var r=e(i),o=r.attr("href"),d=r.data("endpoint"),s=r.parents(".theme-item"),h=s.data("theme");s.attr("id");if(!d.length||!h.length)return!1;a.ajax.request(d,{type:"POST",data:{action:"details-theme_"+h},complete:function(i,a){if("success"!==a)return!1;var r=n.getElementById("theme-details-modal").innerHTML,d=Handlebars.compile(r)(i.responseJSON.results);e("#wrapper").append(d),e("#theme-modal").modal("show"),t.history.pushState({href:o},"",o)}})},activate:function(e){return a.themes._do(e,"activate")},delete:function(e){return a.themes._do(e,"delete")},_do:function(t,n){var i=e(t),r=(i.attr("href"),i.data("endpoint")),o=i.parents(".theme-item"),d=o.data("theme")||i.data("theme"),s=o.attr("id")||"theme-"+d,h=(n=n||-1,e("#theme-modal"));if(!r.length||!d.length)return!1;a.ui.confirm(a.i18n.themes[n],function(){h.length&&h.modal("hide"),a.ajax.request(r,{type:"POST",data:{action:n+"-theme_"+d},complete:function(t,i){if("success"!==i)return!1;"delete"!==n?a.ui.reload("#wrapper",!1):e("#"+s).fadeOut(function(){e(this).remove(),a.ui.reload("#wrapper",!1)})}})})}},e(n).ready(function(){r.indexOf("?")>0&&(r=r.substring(0,r.indexOf("?"))),e(n).on("click",".theme-details",function(e){return e.preventDefault(),a.themes.details(this)}),e(n).on("click",".theme-activate",function(e){return e.preventDefault(),a.themes.activate(this)}),e(n).on("click",".theme-delete",function(e){return e.preventDefault(),a.themes.delete(this)}),e(n).on("hidden.bs.modal","#theme-modal",function(n){t.history.pushState({href:r},"",r),e(this).remove()})})}(window.jQuery||window.Zepto,window,document);
